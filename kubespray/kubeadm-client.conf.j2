apiVersion: kubeadm.k8s.io/v1beta3
kind: JoinConfiguration
discovery:
  bootstrapToken:
    token: "{{ kubeadm_token_variable }}"
    apiServerEndpoint: "{{ public_api_ip | default(hostvars['master']['ansible_host']) }}:6443"
    caCertHashes:
      - "sha256:{{ ca_cert_hash_variable }}"
  timeout: 5m0s
  tlsBootstrapToken: "{{ kubeadm_token_variable }}"
nodeRegistration:
  criSocket: /var/run/containerd/containerd.sock
  name: "{{ inventory_hostname }}"
